{% extends 'user/base.html' %}
{% block title %}
Zenia
{% endblock title %}
{% load static %}
{% block 'body' %}
{% comment %} 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-xrRzYFRq6Zr8Hrxu3G81CNbSG0lOGzF5W24QoV+Z4fb7Ij6GNgvvh0Qf+7YMy0xlZbhGdxO4gRg3+6gPHo9Rg==" crossorigin="anonymous" /> {% endcomment %}

<link rel="stylesheet" href="{% static 'assets/css/extra3.css' %}">

<div aria-live="polite" aria-atomic="true" class="toast-container position-fixed  end-0 p-3 mt-70" id="toastPlacement" style="z-index: 1000;">
	{% for message in messages %}
	  <div class="toast align-items-center text-white bg-{{ message.tags }} border-0 pe-3" role="alert" aria-live="assertive" aria-atomic="true">
		<div class="d-flex">
		  <div class="toast-body">
			{{ message }}
		  </div>
		</div>
	  </div>
	{% endfor %}
  </div>

  <main class="main">
    <div class="section block-breadcrumb">
      <div class="container"> 
        <div class="breadcrumbs"> 
          <ul> 
            <li> <a href="/">Home </a></li>
            <li> <a href="#">Profile</a></li>
          </ul>
        </div>
      </div>
    </div>
    
  
    <section class="pt-25 p-5">
        <div class="container ">
            <div class="row ">
                <div class="col-lg-10 m-auto ">
                    <div class="row">
                        <div class="col-md-4 p-3 mb-4 " style="border: solid 1px #F1F1F1; border-radius: 10px; background:  #F6F6F6; box-shadow: 2px 2px 5px 1px rgba(0, 0, 0, 0.2);">
                            <div class="author-card pb-4 p-2" style="backgrounde5e5e5;">
                                <div class="author-card-cover" style="background-image: url(https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRB-IuWJYZEC4oBMR37dqW_OL07eQiMPzfsTg&usqp=CAU);"></div>
                                <div class="author-card-profile">
                                    {% if user.profile_img %}
                                    <div class="author-card-avatar"><img src="{{user.profile_img.url}}" alt="Daniel Adams" width="100" height="100" style="border-radius: 50%;">
                                    </div>
                                    {% else %}
                                     <div class="author-card-avatar"><img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="Daniel Adams" width="100" height="100" style="border-radius: 50%;">
                                    </div> 

                                    {% endif %}
                                    <div class="author-card-details">
                                        <h5 class="author-card-name text-lg">{{user.first_name | capfirst}} {{user.last_name}}</h5>
                                        <h6 class="author-card-name text-lg">@{{user.username}} </h6>
                                        <p class="author-card-name">Z-wallet : {% if wallet %}₹{{wallet.balance}}{% else %}0.00{% endif %}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="dashboard-menu">
                                <div class="card">
                                   
                                
                                </div>
                                <ul class="nav flex-column" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" href="#dashboard" role="tab" aria-controls="dashboard" aria-selected="false"><i class="fi-rs-settings-sliders mr-10"></i><p>Dashboard</p></a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="orders-tab" data-bs-toggle="tab" href="#orders" role="tab" aria-controls="orders" aria-selected="false"><i class="fi-rs-shopping-bag mr-10"></i><p>Orders</p></a>
                                    </li>
                                    
                                    <li class="nav-item">
                                        <a class="nav-link" id="address-tab" data-bs-toggle="tab" href="#address" role="tab" aria-controls="address" aria-selected="true"><i class="fi-rs-marker mr-10"></i><p>My Address</p></a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="account-detail-tab" data-bs-toggle="tab" href="#account-detail" role="tab" aria-controls="account-detail" aria-selected="true"><i class="fi-rs-user mr-10"></i><p>Account details</p></a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="user_logout" ><i class="fi-rs-sign-out mr-10"></i><p>Logout</p></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="tab-content dashboard-content" >
                                <div class="tab-pane fade active show" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                                    <div class="card mt-" >
                                       <div class="card-header bg-white " >
                                            
                                            <h5 class="mb-0 text-dark">Hey, {{user.first_name | capfirst}} {{user.last_name}} </h5>
                                            <div class="d-flex p-3">
                                                <img width="50"  src="https://play-lh.googleusercontent.com/FYKnN7m-XNElQs7BLOKcwh4JLLOG7BCACHxYeZLeyNK6ZddGGDZdm3osk4IIMuoPXPY=w240-h480-rw" alt="">
                                            <h5 class="text-success mt-3 ms-2" >: {% if wallet %}₹{{wallet.balance}}{% else %}0.00{% endif %}</h5  >
                                            </div>
                                        </div> 
                                        <div class="card-body p-0">
                                            <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
                                                <div class="carousel-inner">
                                                  <div class="carousel-item active">
                                                    <img src="https://i.ytimg.com/vi/CKXFK9yEtMo/maxresdefault.jpg" class="d-block w-100" alt="...">
                                                  </div>
                                                  <div class="carousel-item">
                                                    <img src="https://images-cdn.ubuy.co.in/6370f5077c82ea59f2493250-nike-mercurial-vapor-13-elite-fg-soccer.jpg" class="d-block w-100" alt="...">
                                                  </div>
                                                  <div class="carousel-item">
                                                    <img src="https://i.ytimg.com/vi/BFIqus0ph_A/maxresdefault.jpg" class="d-block w-100" alt="...">
                                                  </div>
                                                </div>
                                              </div>
                                        </div>
                                    </div> 
                                    </div>

                                <div class="tab-pane fade " id="orders" role="tabpanel" aria-labelledby="orders-tab">
                                    <div class="card striped" style="width: 500px; height: 600px; overflow: auto;">
                                            <h5 class="mx-4 mt-3">Your Orders</h5>
                                        
                                        {% if orders %}
                                        
                                        <div class="card-body">

                                                        {% for order in orders %}
                                                        <a href="{% url 'user_order_details' id=order.id %}">
                                                            <div class=" card mb-3">
                                                                <div class="p-3 bg-black card-header">
                                                                    <p class="text-grey text-sm" >Order ID -  {{order.order_number}}</p>
                                                                    <div class="m-1">         
                                                                        {% if order.status == 'Shipped'%}  
                                                                        <h6 class="text-primary">{{order.status}}</h6>
                                                                        {% elif order.status == 'Cancelled' %}
                                                                        <h6 class="text-danger">{{order.status}}</h6>
                                                                        {% elif order.status == 'Placed' %}
                                                                        <h6 class="text-black">Confirmed</h6>
                                                                        {% elif order.status == 'Returned' %}
                                                                        <h6 class="text-success">{{order.status}}</h6>
                                                                        {% elif order.status == 'Return Pending' %}
                                                                        <h6 class="text-warning">Return Requested</h6>
                                                                        {% elif order.status == 'Delivered' %}
                                                                        <h6 class="text-success">{{order.status}}</h6>
                                                                        {% endif %}
                                                                    </div>
                                                                    <div class="m-1">
                                                                        <p>Ordered on {{order.order_date}}</p>
                                                                    </div>
                                                                    <div class="m-1">
                                                                        <p>₹{{order.order_total}}</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </a>
                                                            
                                        
                                                        {% endfor %}

                                        </div>
                                        {% else %}
                                        <div class="card-body d-flex">
                                            
                                            <img src="https://i.pinimg.com/736x/ff/3d/66/ff3d66d438ddff2c520db4d26fce8760.jpg" alt="">
                                        </div>

                                        {% endif %}
                                    </div>
                                </div>
                                
                                <div class="tab-pane fade" id="address" role="tabpanel" aria-labelledby="address-tab">
                                    <div class="row">
                                        
                                        {% for address in addresses %}
                                        {% if address.is_billing %}
                                        <div class="col-lg-12 mb-3 hover-up">
                                            <div class="card mb-3 mb-lg-0">
                                                <div class="card-header d-flex justify-content-between">
                                                    <div >
                                                        <h5 class="mb-0 text-primary">Default Address</h5>
                                                    </div>
                                                    
                                                    <div class="">
                                                        <a href="{% url 'user_delete_address' address_id=address.id %}" >
                                                            <i class="fa-solid fa-xmark fa-2xl" style="color: #6f7785;"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="card-body">
                                                    <address>{{address.name}}<br>{{address.address_1}}<br>{{address.address_2}}<br>{{address.pin}}</address>
                                                    <p>{{address.state}}</p>
                                                    <a type="button" data-bs-toggle="modal" data-bs-target="#editModal{{address.id}}" data-bs-whatever="" class="btn-black"><p class="text-danger mt-3" >Edit</p></a>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}

                                        

                                        {% comment %} second edit address modal {% endcomment %}
                        
                                <div class="modal fade" id="editModal{{address.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <h1 class="modal-title fs-5" id="exampleModalLabel">Edit Address</h1>
                                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                          <form method="post" action="{% url 'user_edit_address' address_id=address.id %}">
                                              {% csrf_token %}
                                              <label for="name">Name:</label>
                                              <input class="form-control" type="text" id="name" name="name" value="{{address.name}}">
                                              <br>
                                              
                                              <label for="city">City:</label>
                                              <input class="form-control" type="text" id="city" name="city" value="{{address.city}}">
                                              <br>
                                      
                                              <label for="address_1">Address line 1:</label>
                                              <input class="form-control" type="text" id="address_1" name="address_1" value="{{address.address_1}}"  required>
                                              <br>
                                      
                                              <label for="address_2">Address line 2:</label>
                                              <input class="form-control" type="text" id="address_2" name="address_2" value="{{address.address_2}}" required>
                                              <br>
                                      
                                              <label for="state">State:</label>
                                              <select class="form-control" id="state" name="state" value="">
                                                  <option value="" disabled selected>Select State</option>
                                                  {% for state_choice in state_choices %}
                                                      <option value="{{ state_choice.0 }}">{{ state_choice.1 }}</option>
                                                  {% endfor %}
                                              </select>
                                              <br>
                                      
                                              <label for="pin">PIN:</label>
                                              <input class="form-control" type="text" id="pin" name="pin" value="{{address.pin}}">
                                              <br>
                                      
                                              <label for="mobile_number">Mobile Number:</label>
                                              <input class="form-control" type="text" id="mobile_number" name="mobile_number" value="{{address.mobile_number}}">
                                              <br>
                                              
                                          
                                        </div>
                                        <div class="modal-footer">
                                          <button type="button" class="btn btn-black" data-bs-dismiss="modal">Close</button>
                                          <button type="submit" class="btn btn-black">Save Changes</button>
                                        </div>
                                      </form>
                                      </div>
                                    </div>
                                </div>
            
                                    {% comment %} second modal ends {% endcomment %}

                                        {% endfor %}

                                        <div class="mb-25 me-0">
                                            <h4>Other Address</h4>
                                        </div>

                                        {% for address in addresses %}
                                        {% if not address.is_billing %}
                                        <div class="col-lg-6 mb-3 hover-up">
                                            <div class="card mb-3 mb-lg-0">
                                                <div class="card-header d-flex justify-content-between">
                                                    <div >
                                                        <h5 class="mb-0">Address</h5>
                                                    </div>
                                                    
                                                    <div class="">
                                                        <a href="{% url 'user_delete_address' address_id=address.id %}" >
                                                            <i class="fa-solid fa-xmark fa-2xl" style="color: #6f7785;"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="card-body">
                                                    <address>{{address.name}}<br>{{address.address_1}}<br>{{address.address_2}}<br>{{address.pin}}</address>
                                                    <p>{{address.state}}</p>
                                                    <a type="button" data-bs-toggle="modal" data-bs-target="#edit2Modal{{address.id}}" data-bs-whatever="" class="btn-black"><p class="text-danger mt-2" >--Edit</p></a><br>
                                                    <a type="button"  href="{% url "user_default_address" id=address.id %}" class="btn-black"><p class="text-danger" >--Set as Default Billing Address</p></a>
                                                </div>
                                            </div>
                                        </div>

                                        {% endif %}


                                        <div class="modal fade" id="edit2Modal{{address.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                              <div class="modal-content">
                                                <div class="modal-header">
                                                  <h1 class="modal-title fs-5" id="exampleModalLabel">Edit Address</h1>
                                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                  <form method="post" action="{% url 'user_edit_address' address_id=address.id %}">
                                                      {% csrf_token %}
                                                      <label for="name">Name:</label>
                                                      <input class="form-control" type="text" id="name" name="name" value="{{address.name}}">
                                                      <br>
                                                      
                                                      <label for="city">City:</label>
                                                      <input class="form-control" type="text" id="city" name="city" value="{{address.city}}">
                                                      <br>
                                              
                                                      <label for="address_1">Address line 1:</label>
                                                      <input class="form-control" type="text" id="address_1" name="address_1" value="{{address.address_1}}"  required>
                                                      <br>
                                              
                                                      <label for="address_2">Address line 2:</label>
                                                      <input class="form-control" type="text" id="address_2" name="address_2" value="{{address.address_2}}" required>
                                                      <br>
                                              
                                                      <label for="state">State:</label>
                                                      <select class="form-control" id="state" name="state" value="">
                                                          <option value="" disabled selected>Select State</option>
                                                          {% for state_choice in state_choices %}
                                                              <option value="{{ state_choice.0 }}">{{ state_choice.1 }}</option>
                                                          {% endfor %}
                                                      </select>
                                                      <br>
                                              
                                                      <label for="pin">PIN:</label>
                                                      <input class="form-control" type="text" id="pin" name="pin" value="{{address.pin}}">
                                                      <br>
                                              
                                                      <label for="mobile_number">Mobile Number:</label>
                                                      <input class="form-control" type="text" id="mobile_number" name="mobile_number" value="{{address.mobile_number}}">
                                                      <br>
                                                      <div class="login_footer form-group">
                                                        <div class="chek-form">
                                                            <div class="custome-checkbox">
                                                                <input class="form-check-input" type="checkbox" name="is_billing" id="exampleCheckbox12" value="1" {% if address.is_billing %}checked{% endif %}>
                                                                <label class="form-check-label" for="exampleCheckbox12"><span>Set as Default Address</span></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                      
                                                  
                                                </div>
                                                <div class="modal-footer">
                                                  <button type="button" class="btn btn-black" data-bs-dismiss="modal">Close</button>
                                                  <button type="submit" class="btn btn-black">Save Changes</button>
                                                </div>
                                              </form>
                                              </div>
                                            </div>
                                        </div>



                                        {% endfor %}
                                       
                                        <div class="col-lg-6 mb-3">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h5 class="mb-0">Add Address</h5>
                                                </div>
                                                <div class="card-body ps-5 ms-4">
                                                    <a  type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever=""><img  class="ms-5 profile-plus-icon" src="https://img.icons8.com/pastel-glyph/64/add.png" alt="add"/></a>
                                                    

                                                    {% comment %} add address modal {% endcomment %}


                                                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                      <div class="modal-dialog">
                                                        <div class="modal-content">
                                                          <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">New Address</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                          </div>
                                                          <div class="modal-body">
                                                            <form method="post" action="{% url 'user_add_address' %}">
                                                                {% csrf_token %}
                                                                <label for="name">Name:</label>
                                                                <input class="form-control" type="text" id="name" name="name" required>
                                                                <br>
                                                                
                                                                <label for="city">City:</label>
                                                                <input class="form-control" type="text" id="city" name="city" required>
                                                                <br>
                                                        
                                                                <label for="address_1">Address line 1:</label>
                                                                <input class="form-control" type="text" id="address_1" name="address_1" required>
                                                                <br>
                                                        
                                                                <label for="address_2">Address line 2:</label>
                                                                <input class="form-control" type="text" id="address_2" name="address_2" required>
                                                                <br>
                                                        
                                                                <label for="state">State:</label>
                                                                <select class="form-control" id="state" name="state" required>
                                                                    <option value="" disabled selected>Select State</option>
                                                                    {% for state_choice in state_choices %}
                                                                        <option value="{{ state_choice.0 }}">{{ state_choice.1 }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                                <br>
                                                        
                                                                <label for="pin">PIN:</label>
                                                                <input class="form-control"type="text" id="pin" name="pin" required>
                                                                <br>
                                                        
                                                                <label for="mobile_number">Mobile Number:</label>
                                                                <input class="form-control" type="text" id="mobile_number" name="mobile_number" required>
                                                                <br>
                                                                <div class="login_footer form-group">
                                                                    <div class="chek-form">
                                                                        <div class="custome-checkbox">
                                                                            <input class="form-check-input" type="checkbox" name="is_billing" id="exampleCheckbox12" value="1" {% if address.is_billing %}checked{% endif %}>
                                                                            <label class="form-check-label" for="exampleCheckbox12"><span>Set as Default Address</span></label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                          </div>
                                                          <div class="modal-footer">
                                                            <button type="button" class="btn btn-black" data-bs-dismiss="modal">Close</button>
                                                            <button type="submit" class="btn btn-black">Save Address</button>
                                                          </div>
                                                        </form>
                                                        </div>
                                                      </div>

                                                      {% comment %} modal end {% endcomment %}

  
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="account-detail" role="tabpanel" aria-labelledby="account-detail-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5>Account Details</h5>
                                        </div>
                                        <div class="card-body">
                                            <div>
                                                <div class="row">
                                                    <div class="form-group col-md-6">
                                                        <label>First Name <span class="required">*</span></label>
                                                        <p class="form-control square pt-2">{{user.first_name}}</p>
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label>Last Name <span class="required">*</span></label>
                                                        <p class="form-control square pt-2">{{user.last_name}}</p>
                                                    </div>
                                                    <div class="form-group col-md-12">
                                                        <label>Username<span class="required">*</span></label>
                                                        <p class="form-control square pt-2">{{user.username}}</p>
                                                    </div>
                                                    <div class="form-group col-md-12">
                                                        <label>Email Address <span class="required">*</span></label>
                                                        <p class="form-control square pt-2">{{user.email}}</p>
                                                    </div>
                                                    <div class="form-group col-md-12">
                                                        <label>Mobile<span class="required">*</span></label>
                                                        <p class="form-control square pt-2">{{user.mobile}}</p>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <a href="/user_profile_edit"><button class="btn btn-black">Edit Profile</button></a>
                                                        <a href="/user_change_password_profile"><button class="btn btn-black" >Change Password</button></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    document.getElementById('user_logout').addEventListener('click',function(){
    Swal.fire({
            title: 'Are you sure?',
            text: "You want to Logout!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Logout'
        }).then((result) => {
            if (result.isConfirmed) {
            
            window.location.href = '/user_logout';
}
})
})

</script> 

<script>
    // Assuming you have an element with the id "successButton"
    const successButton = document.getElementById("successButton");
  
    // Add an event listener to the successButton
    successButton.addEventListener("click", () => {
      cuteAlert({
        type: "success",
        title: "Congratulation!",
        message: "Your order is on its way",
        buttonText: "Ayyy!!",
        closeStyle: "circle",
      });
    });
  </script>
  
  

{% endblock %}